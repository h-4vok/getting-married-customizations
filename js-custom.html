<script type="text/javascript">
    // Initialize CustomJS singleton if not existing
    // We will save all our code within this bad boy
    var CustomJS = CustomJS || {};

</script>
<script>

    // Create a closure for the main page countdown
    CustomJS.Countdown = function(containerName) {
        // Set the date we're counting down to
        var countDownDate = new Date("May 18, 2019 20:00:00").getTime();

        // Update the count down every 1 second
        var x = setInterval(function() {

            // Get todays date and time
            var now = new Date().getTime();

            // Find the distance between now and the count down date
            var distance = countDownDate - now;

            // Time calculations for days, hours, minutes and seconds
            var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // Display the result in the element with id="countdown"
            document.getElementById(containerName).innerHTML = days + " días " + hours + " horas "
            + minutes + " minutos " + seconds + " segundos.";

            // If the count down is finished, write some text 
            if (distance < 0) {
                clearInterval(x);
                document.getElementById(containerName).innerHTML = "";
            }
        }, 1000);
    };

</script>
<script type="text/javascript">

    // Removing ads of the hosting server! LOL
    CustomJS.RemoveAds = function() {

        let removed = false;
        let adsInterval = null;

        let removeAdsClosure = () => {
            let webhostDiv = jQuery('div[style="text-align: right;position: fixed;z-index:9999999;bottom: 0; width: 100%;cursor: pointer;line-height: 0;display:block !important;"]');

            if (webhostDiv.length) {
                if (removed) {
                    if (adsInterval) clearInterval(adsInterval);
                    return;
                }

                webhostDiv.hide();
                if (adsInterval) clearInterval(adsInterval);
            }
        };

        removeAdsClosure();

        if(removed) return;

        // Can't recall why I need this. Clearly the ads must be coming back.
        adsInterval = setInterval(function() {
            removeAdsClosure();
        }, 1000)

    };

</script>

<script type="text/javascript">

    CustomJS._civilUnionLocation = "https://www.google.com.ar/maps/place/Registro+Civil+Central/@-34.5999214,-58.386505,15z/data=!4m2!3m1!1s0x0:0x37aa9757a93e89f0?sa=X&ved=2ahUKEwiW4aeFrYneAhUDhZAKHclHASsQ_BIwCnoECAsQCw";
    CustomJS._partyLocation = "https://www.google.com/maps/place/Ensue%C3%B1o+Recepciones/@-34.6616883,-58.3689685,15z/data=!4m5!3m4!1s0x0:0x8259557a65c7be17!8m2!3d-34.6616883!4d-58.3689685";

    // Helper function we will use a lot!
    CustomJS.OpenMapLocation = function(url) {
        window.open(url, "_blank");
    };

    // Opening the google maps location of where the civil union will take place
    CustomJS.OpenCivilLocation = function() {
        CustomJS.OpenMapLocation(CustomJS._civilUnionLocation);
    };

    // Opening the google maps location of where the party will take place 
    CustomJS.OpenPartyLocation = function() {
        CustomJS.OpenMapLocation(CustomJS._partyLocation);
    };

</script>

<script type="text/javascript">

    CustomJS._getGridySubtitleHtml = function(text, mapLocationScript) {

        const gridDivOpen = "<div class='subtitle-grid-container'>";
        const subtitleElement = "<span class='subtitle-grid-subtitle'>" +  text + "</span>";
        const buttonElement = "<div class='subtitle-grid-mapbutton'><button class='subtitle-grid-mapbutton subtext-button' onClick='" + mapLocationScript + "'>Cómo Llegar</button></div>";
        const gridDivClose = "</div>";

        const output = gridDivOpen + subtitleElement + buttonElement + gridDivClose;

        return output;

    };

    // In this closure we are changing the subtext of some of the posts/articles (which are actually used as sections on the site)
    CustomJS.SetTitlesAndSubtitles = function() {

        const civilUnionPostSubtitle = jQuery("#post-35 .posted-on");
        
        const partyPostTitle = jQuery("post-48 .entry-title");
        const partyPostSubtitle = jQuery("#post-48 .posted-on");

        // Civil Union customization
        if (civilUnionPostSubtitle.length) {
            civilUnionPostSubtitle[0].innerHTML = 
                CustomJS._getGridySubtitleHtml(
                    "Nos casamos por civil el Viernes 17 de Mayo! En Uruguay 753, CABA.", 
                    "CustomJS.OpenCivilLocation();");
        }

        // Party Post customization
        if (partyPostTitle.length) { 
            partyPostTitle[0].innerHTML = '<a href="' + CustomJS._partyLocation + '" rel="bookmark">La Fiesta!</a>';
        }

        if (partyPostSubtitle.length) {
            partyPostSubtitle[0].innerHTML = 
                CustomJS._getGridySubtitleHtml(
                    "La fiesta es en Ensueño Recepciones a las 21:30hs, Sábado 18 de Mayo! España 122, Avellaneda.", 
                    "CustomJS.OpenPartyLocation();");
        }

    };

</script>

<script type="text/javascript">

    // On the document ready event (yep, using jQuery, it's a cheap development yo) we call all the closures we have been defining so far.
    // This way we separate each concern in a separate script tag and then we call everything we want here.
    jQuery(document).ready(function() {
        CustomJS.Countdown('countdown');
        CustomJS.RemoveAds();
        CustomJS.SetTitlesAndSubtitles();
    });

</script>